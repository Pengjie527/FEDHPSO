# FedH-PSO å®éªŒæµç¨‹è¯¦ç»†è¯´æ˜

## ğŸ“‹ æ•´ä½“æ¶æ„

FedH-PSO æ˜¯ä¸€ä¸ª**è”é‚¦å±‚æ¬¡åŒ–èšç±»**ç³»ç»Ÿï¼Œç»“åˆ**ç²’å­ç¾¤ä¼˜åŒ–(PSO)**æ¥ä¼˜åŒ–å…¨å±€èšç±»ä¸­å¿ƒã€‚

```
æ•°æ®æµ: å„ç«™ç‚¹ â†’ æœ¬åœ°èšç±» â†’ è”é‚¦ä¼˜åŒ– â†’ å…¨å±€ä¸­å¿ƒ
```

## ğŸ”¬ å®éªŒæµç¨‹ï¼ˆ6ä¸ªä¸»è¦é˜¶æ®µï¼‰

### é˜¶æ®µ 1: æ•°æ®åŠ è½½ä¸é¢„å¤„ç†
**æ–‡ä»¶**: `local_clustering.py` `LocalSite.load_data()` å’Œ `normalize_data()` æ–¹æ³•

#### 1.1 æ•°æ®åŠ è½½
```python
site = LocalSite(site_id=1, data_path="group1_mimic_data.csv", n_clusters=76)
site.load_data(use_first_bloc_only=True)  # åªä½¿ç”¨æ¯ä¸ªæ‚£è€…çš„ç¬¬ä¸€æ¡blocæ•°æ®
```

**è¾“å…¥æ•°æ®**:
- `group1_mimic_data.csv` (ç«™ç‚¹1)
- `group2_mimic_data.csv` (ç«™ç‚¹2)
- `group3_mimic_data.csv` (ç«™ç‚¹3)

**æ•°æ®é¢„å¤„ç†æµç¨‹**ï¼ˆç”± `featuredatameasure/preprocessing.py` æ‰§è¡Œï¼‰:
1. **ç‰¹å¾é€‰æ‹©**: æ ¹æ®ç‰¹å¾å®šä¹‰é€‰æ‹©æ•°å€¼ç‰¹å¾åˆ—
2. **å¯¹æ•°å˜æ¢**: å¯¹å¯¹æ•°æ­£æ€åˆ†å¸ƒç‰¹å¾åº”ç”¨ `log(0.1 + x)` å˜æ¢
3. **æ ‡å‡†åŒ–**: 
   - äºŒè¿›åˆ¶ç‰¹å¾: å·²è¿›è¡Œ -0.5 å¤„ç†
   - æ­£æ€åˆ†å¸ƒç‰¹å¾: Z-scoreæ ‡å‡†åŒ–
   - å¯¹æ•°æ­£æ€ç‰¹å¾: å…ˆlogå˜æ¢ï¼Œå†Z-scoreæ ‡å‡†åŒ–

**è¾“å‡º**: æ ‡å‡†åŒ–åçš„ç‰¹å¾çŸ©é˜µï¼Œå¯ç”¨äºèšç±»

---

### é˜¶æ®µ 2: æœ¬åœ°ç«™ç‚¹èšç±»
**æ–‡ä»¶**: `local_clustering.py` `LocalSite.perform_local_clustering()` æ–¹æ³•

#### 2.1 ç¡®å®šèšç±»æ•°é‡
æ”¯æŒä¸‰ç§æ–¹å¼ç¡®å®šæœ€ä¼˜èšç±»æ•°é‡ï¼š

**æ–¹å¼ 1: æ”¹è¿›çš„å¯å‘å¼è§„åˆ™** (é»˜è®¤ï¼Œå¿«é€Ÿ)
```python
# åŸºäºæ ·æœ¬æ•°å’Œç‰¹å¾æ•°çš„ç»¼åˆè§„åˆ™
k_samples = sqrt(n_samples)
k_features = sqrt(n_features) * 2
k = min(k_samples, k_features)  # å–è¾ƒå°å€¼ï¼ˆæ›´ä¿å®ˆï¼‰
```

**æ–¹å¼ 2: è‚˜éƒ¨æ³•åˆ™** (è¾ƒæ…¢ä½†æ›´å‡†ç¡®)
- æµ‹è¯•ä¸åŒkå€¼ä¸‹çš„inertiaï¼ˆèšç±»è¯¯å·®ï¼‰
- å¯»æ‰¾inertiaä¸‹é™ç‡æ˜¾è‘—å˜å°çš„"è‚˜éƒ¨"ç‚¹
- è‡ªåŠ¨ç¡®å®šæµ‹è¯•èŒƒå›´ï¼ˆåŸºäºå¯å‘å¼ç»“æœï¼‰

**æ–¹å¼ 3: è½®å»“ç³»æ•°æ³•** (æœ€æ…¢ä½†æœ€å‡†ç¡®)
- æµ‹è¯•ä¸åŒkå€¼ä¸‹çš„è½®å»“ç³»æ•°
- é€‰æ‹©è½®å»“ç³»æ•°æœ€é«˜çš„kå€¼
- å¤§æ•°æ®é›†è‡ªåŠ¨é‡‡æ ·ï¼ˆæœ€å¤š5000æ ·æœ¬ï¼‰

#### 2.2 æ‰§è¡ŒK-Meansèšç±»
```python
site.perform_local_clustering(
    random_state=42,
    auto_determine_k=True,  # è‡ªåŠ¨ç¡®å®škå€¼
    k_method='improved_heuristic',  # æˆ– 'elbow', 'silhouette'
    min_k=2,
    max_k=50
)
```

**è¾“å‡º**:
- èšç±»ä¸­å¿ƒçŸ©é˜µ: `(n_clusters, n_features)`
- èšç±»æ ‡ç­¾: æ¯ä¸ªæ ·æœ¬æ‰€å±çš„ç°‡
- èšç±»å¤§å°: æ¯ä¸ªç°‡çš„æ ·æœ¬æ•°
- æƒ¯æ€§(Inertia): èšç±»è¯¯å·®(SSE)

---

### é˜¶æ®µ 3: èšç±»è´¨é‡è¯„ä¼°
**æ–‡ä»¶**: `local_clustering.py` `LocalSite.evaluate_clustering()` æ–¹æ³•

#### 3.1 è®¡ç®—è¯„ä¼°æŒ‡æ ‡
æ¯ä¸ªç«™ç‚¹èšç±»å®Œæˆåï¼Œè‡ªåŠ¨è®¡ç®—ä»¥ä¸‹è¯„ä¼°æŒ‡æ ‡ï¼š

**1. Silhouette Score (è½®å»“ç³»æ•°)**
- **èŒƒå›´**: -1 åˆ° 1
- **æ–¹å‘**: è¶Šå¤§è¶Šå¥½
- **è®¡ç®—**: ä½¿ç”¨é‡‡æ ·ï¼ˆæœ€å¤š10,000æ ·æœ¬ï¼‰åŠ é€Ÿè®¡ç®—
- **é™åˆ¶**: æ•°æ®é‡ > 50,000 æ—¶è·³è¿‡è®¡ç®—

**2. Calinski-Harabasz Score (CHæŒ‡æ•°)**
- **æ–¹å‘**: è¶Šå¤§è¶Šå¥½
- **è®¡ç®—**: ç°‡é—´ç¦»æ•£åº¦ä¸ç°‡å†…ç¦»æ•£åº¦çš„æ¯”å€¼

**3. Davies-Bouldin Score (DBæŒ‡æ•°)**
- **æ–¹å‘**: è¶Šå°è¶Šå¥½
- **è®¡ç®—**: ç°‡å†…è·ç¦»ä¸ç°‡é—´è·ç¦»çš„æ¯”å€¼

**4. Inertia (æƒ¯æ€§/SSE)**
- **æ–¹å‘**: è¶Šå°è¶Šå¥½
- **è®¡ç®—**: æ‰€æœ‰æ ·æœ¬åˆ°å…¶æ‰€å±ç°‡ä¸­å¿ƒçš„è·ç¦»å¹³æ–¹å’Œ

#### 3.2 ç»“æœè¾“å‡º
```python
evaluation_metrics = site.evaluate_clustering()
# è¿”å›å­—å…¸åŒ…å«ä¸Šè¿°æ‰€æœ‰æŒ‡æ ‡
```

**æ§åˆ¶å°è¾“å‡ºç¤ºä¾‹**:
```
ç«™ç‚¹ 1 èšç±»è¯„ä¼°ç»“æœ:
  - èšç±»æ•°é‡: 76
  - æ ·æœ¬æ•°é‡: 6974
  - æƒ¯æ€§: 184975.42
  - Silhouette Score: 0.4231 (è¶Šå¤§è¶Šå¥½, èŒƒå›´: -1 åˆ° 1)
  - Calinski-Harabasz Score: 234.56 (è¶Šå¤§è¶Šå¥½)
  - Davies-Bouldin Score: 1.234 (è¶Šå°è¶Šå¥½)
```

---

### é˜¶æ®µ 4: å‡†å¤‡ä¸Šä¼ ä¿¡æ¯
**æ–‡ä»¶**: `main_fedh_pso.py` ç¬¬85-96è¡Œ

æ”¶é›†æ¯ä¸ªç«™ç‚¹çš„èšç±»ç»“æœï¼Œå‡†å¤‡ä¸Šä¼ åˆ°è”é‚¦æœåŠ¡å™¨ï¼š

```python
upload_infos = []
for site_id, res in local_results.items():
    upload_infos.append({
        'site_id': site_id,
        'n_samples': res['n_samples'],           # æ ·æœ¬æ•°
        'inertia': res['inertia'],               # æœ¬åœ°èšç±»è¯¯å·®(SSE)
        'cluster_centers': res['cluster_centers'], # èšç±»ä¸­å¿ƒçŸ©é˜µ
        'evaluation_metrics': res.get('evaluation_metrics', {})  # è¯„ä¼°æŒ‡æ ‡ï¼ˆå¯é€‰ï¼‰
    })
```

**ä¸Šä¼ å†…å®¹**:
- ç«™ç‚¹IDå’Œæ ·æœ¬æ•°
- æœ¬åœ°èšç±»è¯¯å·®(SSE)
- èšç±»ä¸­å¿ƒçŸ©é˜µ `(n_clusters, n_features)`
- è¯„ä¼°æŒ‡æ ‡ï¼ˆå¯é€‰ï¼Œç”¨äºæœ¬åœ°åˆ†æï¼‰

---

### é˜¶æ®µ 5: FedH-PSO è”é‚¦èšç±»ä¼˜åŒ– â­
**æ–‡ä»¶**: `fedh_pso.py` `federated_clustering()` æ–¹æ³•

è¿™æ˜¯æ ¸å¿ƒé˜¶æ®µï¼ŒåŒ…å«4ä¸ªå­é˜¶æ®µï¼š

#### 5.1 è®¡ç®—æœºæ„æƒé‡
```python
weights = weighted_aggregator.compute_weights(upload_infos)
# åŸºäºæ ·æœ¬æ•°å’Œè¯¯å·®åŠ¨æ€è®¡ç®—æƒé‡
```

**æƒé‡è®¡ç®—å…¬å¼**: 
```
w_i = (n_i / Î£n_j) * (1 / I_i) / Î£[(n_j / Î£n_k) * (1 / I_j)]
```
å…¶ä¸­ï¼š
- `n_i`: ç«™ç‚¹içš„æ ·æœ¬æ•°
- `I_i`: ç«™ç‚¹içš„èšç±»è¯¯å·®(SSE)
- æƒé‡å½’ä¸€åŒ–: Î£w_i = 1

**è¾“å‡ºç¤ºä¾‹**: `[0.3333, 0.3333, 0.3333]` (3ä¸ªç«™ç‚¹)

#### 5.2 åˆå§‹åŠ æƒèšåˆ
```python
initial_centers = weighted_aggregator.aggregate(upload_infos, weights, k_global=50)
# åŠ æƒå¹³å‡: C_global = Î£(w_i * C_i)
```

å°†å„ç«™ç‚¹çš„èšç±»ä¸­å¿ƒæŒ‰æƒé‡èšåˆï¼Œå¾—åˆ°åˆå§‹å…¨å±€ä¸­å¿ƒã€‚

#### 5.3 PSOä¼˜åŒ–
**ç›®æ ‡**: ä¼˜åŒ–å…¨å±€èšç±»ä¸­å¿ƒï¼Œä½¿åŠ æƒæ€»è¯¯å·®æœ€å°

```python
for iter in range(max_global_iter):  # æœ€å¤š30æ¬¡è¿­ä»£
    # PSOä¼˜åŒ–
    optimal_centers, fitness = pso_optimizer.optimize(
        local_centers_list,  # å±€éƒ¨ä¸­å¿ƒåˆ—è¡¨
        weights              # ç«™ç‚¹æƒé‡
    )
    
    # æ£€æŸ¥æ”¶æ•›
    center_diff = ||current_centers - previous_centers||
    if center_diff < 1e-4:
        break  # å·²æ”¶æ•›
```

**PSOä¼˜åŒ–å™¨** (`pso_optimizer.py`):
- **ç²’å­åˆå§‹åŒ–**: ä»åŠ æƒèšåˆçš„ä¸­å¿ƒå¼€å§‹
- **é€Ÿåº¦æ›´æ–°**: `v = Ï‰*v + c1*r1*(pbest-x) + c2*r2*(gbest-x)`
- **ä½ç½®æ›´æ–°**: `x = x + v`
- **é€‚åº”åº¦å‡½æ•°**: `fitness = Î£ w_i * SSE_i(centers)`
- **å‚æ•°**: 
  - `Ï‰ = 0.3` (æƒ¯æ€§æƒé‡)
  - `c1 = 0.5` (ä¸ªä½“å­¦ä¹ å› å­)
  - `c2 = 0.1` (ç¤¾ä¼šå­¦ä¹ å› å­)
  - `max_iter = 50` (PSOå†…éƒ¨è¿­ä»£æ¬¡æ•°)

#### 5.4 å±‚æ¬¡åŒ–èšç±»åˆ†æ
å¯¹æœºæ„è¿›è¡Œèšç±»ï¼Œè¯†åˆ«ç›¸ä¼¼æœºæ„ï¼š

```python
# Level 1: æœºæ„å±‚èšç±»
institution_labels = hierarchical_clustering.cluster_institutions(
    local_centers_list,
    n_clusters=3  # æœ€å¤šåˆ†3ç±»
)

# è®¡ç®—æœºæ„ç›¸ä¼¼åº¦çŸ©é˜µ
similarity_matrix = hierarchical_clustering.analyze_institution_similarity(
    local_centers_list
)
```

**è¾“å‡º**:
- æœºæ„èšç±»æ ‡ç­¾
- æœºæ„ç›¸ä¼¼åº¦çŸ©é˜µï¼ˆç”¨äºçƒ­åŠ›å›¾å¯è§†åŒ–ï¼‰

---

### é˜¶æ®µ 6: ç»“æœä¿å­˜ä¸å¯è§†åŒ–
**æ–‡ä»¶**: `main_fedh_pso.py` ç¬¬117-125è¡Œ

#### 6.1 ä¿å­˜ç»“æœ
ä¿å­˜åˆ° `results_fedh_pso/fedh_pso_YYYYMMDD_HHMMSS/` ç›®å½•ï¼š

| æ–‡ä»¶ | å†…å®¹ |
|------|------|
| `global_centers.npy` | å…¨å±€èšç±»ä¸­å¿ƒ `(k_global, n_features)` |
| `weights.json` | ç«™ç‚¹æƒé‡åˆ—è¡¨ |
| `convergence_history.json` | æ”¶æ•›å†å² & é€‚åº”åº¦å†å² |
| `institution_clusters.json` | æœºæ„èšç±»æ ‡ç­¾ & ç›¸ä¼¼åº¦çŸ©é˜µ |
| `summary.json` | å®éªŒæ‘˜è¦ï¼ˆè¿­ä»£æ¬¡æ•°ã€æ”¶æ•›çŠ¶æ€ã€é…ç½®å‚æ•°ç­‰ï¼‰ |

#### 6.2 å¯è§†åŒ–ç»“æœ

**æœ¬åœ°èšç±»å¯è§†åŒ–** (`local_clustering.py`):
1. **èšç±»ç»“æœå›¾** (`visualize_clustering_results`):
   - PCA/t-SNEé™ç»´åçš„2Dèšç±»å¯è§†åŒ–
   - ç°‡å¤§å°åˆ†å¸ƒç›´æ–¹å›¾
   
2. **ç»Ÿè®¡ä¿¡æ¯å›¾** (`visualize_cluster_statistics`):
   - ç°‡æ•°é‡å¯¹æ¯”
   - ç°‡å¤§å°å¯¹æ¯”
   - æ ·æœ¬æ•°å¯¹æ¯”
   - æƒ¯æ€§å¯¹æ¯”

3. **è¯„ä¼°æŒ‡æ ‡å›¾** (`visualize_evaluation_metrics`):
   - Silhouette Score æŸ±çŠ¶å›¾
   - Calinski-Harabasz Score æŸ±çŠ¶å›¾
   - Davies-Bouldin Score æŸ±çŠ¶å›¾
   - Inertia æŸ±çŠ¶å›¾

**è”é‚¦èšç±»å¯è§†åŒ–** (`visualize_results.py`):
1. `pso_convergence_curve.png` - PSOé€‚åº”åº¦æ›²çº¿
2. `weights_distribution.png` - ç«™ç‚¹æƒé‡åˆ†å¸ƒ
3. `institution_clustering.png` - æœºæ„èšç±»çƒ­åŠ›å›¾
4. `comprehensive_report.png` - ç»¼åˆæŠ¥å‘Š

---

## ğŸš€ å¦‚ä½•è¿è¡Œ

### æ–¹å¼ 1: è¿è¡Œå®Œæ•´è”é‚¦èšç±»å®éªŒ
```bash
cd fedkmeans/psowithkmeans
python main_fedh_pso.py
```

**é…ç½®å‚æ•°** (`main_fedh_pso.py`):
```python
K_LOCAL = 76              # æ¯ä¸ªç«™ç‚¹å±€éƒ¨èšç±»ç°‡æ•°ï¼ˆå¦‚æœauto_determine_k=Falseï¼‰
K_GLOBAL = 50             # å…¨å±€èšç±»ç°‡æ•°
PSO_PARTICLES = 10        # PSOç²’å­æ•°
PSO_MAX_ITER = 50         # PSOå†…éƒ¨æœ€å¤§è¿­ä»£æ¬¡æ•°
PSO_OMEGA = 0.3           # PSOæƒ¯æ€§æƒé‡
PSO_C1 = 0.5              # PSOä¸ªä½“å­¦ä¹ å› å­
PSO_C2 = 0.1              # PSOç¤¾ä¼šå­¦ä¹ å› å­
MAX_GLOBAL_ITER = 30      # å…¨å±€è¿­ä»£æœ€å¤§æ¬¡æ•°
CONVERGENCE_THRESHOLD = 1e-4  # æ”¶æ•›é˜ˆå€¼
```

### æ–¹å¼ 2: ä»…è¿è¡Œæœ¬åœ°èšç±»ï¼ˆæµ‹è¯•ç”¨ï¼‰
```bash
cd fedkmeans/psowithkmeans
python local_clustering.py
```

**é…ç½®å‚æ•°** (`local_clustering.py` ä¸»å‡½æ•°):
```python
import os
# è·å–é¡¹ç›®æ ¹ç›®å½•ï¼ˆå‡è®¾è„šæœ¬åœ¨ fedkmeans/psowithkmeans/ ç›®å½•ä¸‹ï¼‰
project_root = os.path.abspath(os.path.join(os.path.dirname(__file__), '..', '..'))

data_paths = {
    1: os.path.join(project_root, "Dataset/datawithnum/group1_mimic_data.csv"),
    2: os.path.join(project_root, "Dataset/datawithnum/group2_mimic_data.csv"),
    3: os.path.join(project_root, "Dataset/datawithnum/group3_mimic_data.csv")
}

sites, upload_infos = run_local_clustering_all_sites(
    data_paths=data_paths,
    n_clusters=750,                    # é»˜è®¤èšç±»æ•°ï¼ˆå¦‚æœauto_determine_k=Falseï¼‰
    random_state=42,
    auto_determine_k=True,             # å¯ç”¨è‡ªåŠ¨ç¡®å®šèšç±»æ•°é‡
    k_method='improved_heuristic',     # 'improved_heuristic', 'elbow', 'silhouette'
    min_k=2,
    max_k=50,
    use_first_bloc_only=True           # åªä½¿ç”¨é¦–æ—¥æ•°æ®
)
```

---

## ğŸ“Š å®éªŒç»“æœè§£è¯»

### è¯„ä¼°æŒ‡æ ‡å«ä¹‰

1. **Silhouette Score (è½®å»“ç³»æ•°)**
   - **èŒƒå›´**: -1 åˆ° 1
   - **> 0.5**: èšç±»è´¨é‡è‰¯å¥½
   - **0.2-0.5**: èšç±»è´¨é‡ä¸­ç­‰
   - **< 0.2**: èšç±»è´¨é‡è¾ƒå·®ï¼Œå¯èƒ½éœ€è¦è°ƒæ•´å‚æ•°

2. **Calinski-Harabasz Score (CHæŒ‡æ•°)**
   - **æ— å›ºå®šèŒƒå›´**
   - è¶Šå¤§è¡¨ç¤ºç°‡é—´åˆ†ç¦»åº¦è¶Šå¥½ï¼Œç°‡å†…ç´§å¯†ç¨‹åº¦è¶Šé«˜

3. **Davies-Bouldin Score (DBæŒ‡æ•°)**
   - **èŒƒå›´**: 0 åˆ° âˆ
   - **< 1**: èšç±»è´¨é‡ä¼˜ç§€
   - **1-2**: èšç±»è´¨é‡è‰¯å¥½
   - **> 2**: èšç±»è´¨é‡è¾ƒå·®

4. **Inertia (æƒ¯æ€§/SSE)**
   - **æ–¹å‘**: è¶Šå°è¶Šå¥½
   - è¡¨ç¤ºæ‰€æœ‰æ ·æœ¬åˆ°å…¶ç°‡ä¸­å¿ƒçš„è·ç¦»å¹³æ–¹å’Œ
   - ä¸åŒæ•°æ®é›†çš„ç»å¯¹æ•°å€¼ä¸å…·æœ‰å¯æ¯”æ€§ï¼Œä¸»è¦çœ‹ç›¸å¯¹å¤§å°

### å…¸å‹ç»“æœç¤ºä¾‹

```
ç«™ç‚¹ 1:
  - æ ·æœ¬æ•°: 6974
  - èšç±»ä¸­å¿ƒæ•°: 76 (è‡ªåŠ¨ç¡®å®š)
  - æƒ¯æ€§: 184975.42
  - Silhouette Score: 0.4231 (ä¸­ç­‰è´¨é‡)
  - Calinski-Harabasz Score: 234.56
  - Davies-Bouldin Score: 1.234 (è‰¯å¥½)
```

---

## ğŸ“ ç»“æœä½ç½®

```
results_fedh_pso/
â””â”€â”€ fedh_pso_YYYYMMDD_HHMMSS/
    â”œâ”€â”€ global_centers.npy          # å…¨å±€èšç±»ä¸­å¿ƒï¼ˆnumpyæ•°ç»„ï¼‰
    â”œâ”€â”€ weights.json                 # ç«™ç‚¹æƒé‡
    â”œâ”€â”€ convergence_history.json     # æ”¶æ•›å†å²
    â”œâ”€â”€ institution_clusters.json    # æœºæ„èšç±»
    â”œâ”€â”€ summary.json                 # å®éªŒæ‘˜è¦
    â””â”€â”€ *.png                        # å¯è§†åŒ–å›¾è¡¨
```

---

## ğŸ” ä»£ç å…³é”®æ–‡ä»¶

| æ–‡ä»¶ | åŠŸèƒ½ |
|------|------|
| `main_fedh_pso.py` | ä¸»ç¨‹åºå…¥å£ï¼Œåè°ƒæ‰€æœ‰é˜¶æ®µ |
| `local_clustering.py` | æœ¬åœ°K-Meansèšç±»ï¼ˆæ•°æ®åŠ è½½ã€é¢„å¤„ç†ã€èšç±»ã€è¯„ä¼°ï¼‰ |
| `fedh_pso.py` | è”é‚¦èšç±»æ ¸å¿ƒé€»è¾‘ |
| `pso_optimizer.py` | PSOä¼˜åŒ–å™¨ï¼ˆç²’å­ç¾¤ç®—æ³•ï¼‰ |
| `weighted_aggregation.py` | åŠ æƒèšåˆï¼ˆè®¡ç®—ç«™ç‚¹æƒé‡ï¼‰ |
| `hierarchical_clustering.py` | å±‚æ¬¡åŒ–èšç±»ï¼ˆæœºæ„èšç±»ï¼‰ |
| `visualize_results.py` | è”é‚¦èšç±»ç»“æœå¯è§†åŒ– |
| `featuredatameasure/preprocessing.py` | æ•°æ®é¢„å¤„ç†æ¨¡å— |

---

## ğŸ¯ å®éªŒé…ç½®å»ºè®®

### å°è§„æ¨¡å®éªŒï¼ˆå¿«é€Ÿæµ‹è¯•ï¼‰
```python
K_LOCAL = 50
K_GLOBAL = 30
auto_determine_k = True
k_method = 'improved_heuristic'  # å¿«é€Ÿ
MAX_GLOBAL_ITER = 10
```

### ä¸­ç­‰è§„æ¨¡å®éªŒï¼ˆå¹³è¡¡ï¼‰
```python
K_LOCAL = 76
K_GLOBAL = 50
auto_determine_k = True
k_method = 'elbow'  # æ›´å‡†ç¡®
MAX_GLOBAL_ITER = 20
```

### å¤§è§„æ¨¡å®éªŒï¼ˆè¿½æ±‚è´¨é‡ï¼‰
```python
K_LOCAL = 100
K_GLOBAL = 75
auto_determine_k = True
k_method = 'silhouette'  # æœ€å‡†ç¡®ä½†æœ€æ…¢
MAX_GLOBAL_ITER = 30
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- `README.md` - ä½¿ç”¨æŒ‡å—
- `ä¿®å¤è¯´æ˜.md` - å·²ä¿®å¤çš„é—®é¢˜
- `å®éªŒæµç¨‹è¯´æ˜.md` - æœ¬æ–‡æ¡£

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **å†…å­˜å ç”¨**: å¤§æ•°æ®é›†ï¼ˆ>50,000æ ·æœ¬ï¼‰è®¡ç®—Silhouette Scoreä¼šæ¶ˆè€—å¤§é‡å†…å­˜ï¼Œå·²è‡ªåŠ¨è·³è¿‡
2. **è®¡ç®—æ—¶é—´**: 
   - `improved_heuristic`: æœ€å¿«
   - `elbow`: ä¸­ç­‰ï¼ˆéœ€è¦æµ‹è¯•å¤šä¸ªkå€¼ï¼‰
   - `silhouette`: æœ€æ…¢ï¼ˆéœ€è¦è®¡ç®—è½®å»“ç³»æ•°ï¼‰
3. **æ•°æ®è·¯å¾„**: ç¡®ä¿ `SITE_DATA_PATHS` ä¸­çš„è·¯å¾„æ­£ç¡®
4. **ç‰¹å¾ç»´åº¦**: ç¡®ä¿æ‰€æœ‰ç«™ç‚¹çš„ç‰¹å¾ç»´åº¦ä¸€è‡´

---

**æœ€åæ›´æ–°**: 2024å¹´ï¼ˆåŸºäºå½“å‰ä»£ç å®ç°ï¼‰
